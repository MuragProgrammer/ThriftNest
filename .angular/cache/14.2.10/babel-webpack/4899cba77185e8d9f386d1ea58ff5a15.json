{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction ProfileComponent_div_19_div_19_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", item_r5.productName, \" (x\", item_r5.quantity, \")\");\n  }\n}\n\nfunction ProfileComponent_div_19_div_19_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_19_div_19_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const order_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.markAsDelivered(order_r1.id));\n    });\n    i0.ɵɵtext(1, \" Mark as Delivered \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProfileComponent_div_19_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"h4\");\n    i0.ɵɵtext(2, \"Items\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProfileComponent_div_19_div_19_div_3_Template, 3, 2, \"div\", 10);\n    i0.ɵɵelementStart(4, \"h4\");\n    i0.ɵɵtext(5, \"Shipping Info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\")(11, \"strong\");\n    i0.ɵɵtext(12, \"Address:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Country:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, ProfileComponent_div_19_div_19_button_18_Template, 2, 0, \"button\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const order_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", order_r1.items);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", order_r1.shipping.fullname, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate3(\" \", order_r1.shipping.address, \", \", order_r1.shipping.city, \", \", order_r1.shipping.state, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", order_r1.shipping.country, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", order_r1.status === \"shipped\");\n  }\n}\n\nfunction ProfileComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_19_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const order_r1 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.toggleExpand(order_r1.id));\n    });\n    i0.ɵɵelementStart(2, \"span\")(3, \"strong\");\n    i0.ɵɵtext(4, \"Total Items:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\")(11, \"strong\");\n    i0.ɵɵtext(12, \"Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 6);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\", 7);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(19, ProfileComponent_div_19_div_19_Template, 19, 7, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const order_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getTotalItems(order_r1.items), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \\u20B1\", order_r1.totalAmount, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(14, 7, order_r1.orderDate, \"mediumDate\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", order_r1.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(order_r1.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.expandedOrders.has(order_r1.id) ? \"\\u25B2\" : \"\\u25BC\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.expandedOrders.has(order_r1.id));\n  }\n}\n\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor() {\n      this.orders = [];\n      this.expandedOrders = new Set();\n    }\n\n    ngOnInit() {\n      const userData = localStorage.getItem('currentUser');\n      this.user = userData ? JSON.parse(userData) : {};\n      const orderData = localStorage.getItem('orders');\n      const allOrders = orderData ? JSON.parse(orderData) : [];\n      this.orders = allOrders.filter(order => order.userId === this.user.id);\n    }\n\n    toggleExpand(orderId) {\n      if (!orderId) return; // guard clause\n\n      this.expandedOrders.has(orderId) ? this.expandedOrders.delete(orderId) : this.expandedOrders.add(orderId);\n    }\n\n    getTotalItems(items) {\n      return items.reduce((sum, item) => sum + item.quantity, 0);\n    }\n\n    markAsDelivered(orderId) {\n      if (!orderId) return;\n      const order = this.orders.find(o => o.id === orderId);\n\n      if (order && order.status !== 'delivered') {\n        order.status = 'delivered'; // Save the updated orders back to localStorage\n\n        const orderData = localStorage.getItem('orders');\n        let allOrders = orderData ? JSON.parse(orderData) : [];\n        const orderIndex = allOrders.findIndex(o => o.id === orderId);\n\n        if (orderIndex !== -1) {\n          allOrders[orderIndex].status = 'delivered';\n          localStorage.setItem('orders', JSON.stringify(allOrders));\n        }\n      }\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)();\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    decls: 20,\n    vars: 4,\n    consts: [[1, \"profile-container\", \"container\"], [1, \"user-info\"], [1, \"order-history\"], [\"class\", \"order-summary\", 4, \"ngFor\", \"ngForOf\"], [1, \"order-summary\"], [1, \"summary-header\", 3, \"click\"], [1, \"order-status\", 3, \"ngClass\"], [1, \"arrow-icon\"], [\"class\", \"order-details\", 4, \"ngIf\"], [1, \"order-details\"], [\"class\", \"order-item\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-outline-dark\", 3, \"click\", 4, \"ngIf\"], [1, \"order-item\"], [1, \"btn\", \"btn-outline-dark\", 3, \"click\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\");\n        i0.ɵɵtext(3, \"User Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\")(5, \"strong\");\n        i0.ɵɵtext(6, \"Username:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n        i0.ɵɵtext(10, \"Full Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"p\")(13, \"strong\");\n        i0.ɵɵtext(14, \"Email:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 2)(17, \"h3\");\n        i0.ɵɵtext(18, \"Order History\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(19, ProfileComponent_div_19_Template, 20, 10, \"div\", 3);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.user.username, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.user.fullName, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.user.email, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n      }\n    },\n    dependencies: [i1.NgClass, i1.NgForOf, i1.NgIf, i1.DatePipe],\n    styles: [\".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:40px;font-family:sans-serif;gap:50px}.user-info[_ngcontent-%COMP%]{flex:1;border:1px solid var(--light-gray);padding:30px;background:var(--white);height:-moz-fit-content;height:fit-content;color:var(--black)}.user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:20px}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-size:14px;color:var(--black)}.order-history[_ngcontent-%COMP%]{flex:2}.order-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:20px;color:var(--black)}.order-summary[_ngcontent-%COMP%]{border:1px solid var(--light-gray);background-color:var(--white);padding:20px;margin-bottom:15px;cursor:pointer;transition:background .2s ease;color:var(--black)}.order-summary[_ngcontent-%COMP%]:hover{background-color:var(--light-gray)}.summary-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;font-size:14px;font-weight:500;color:var(--black)}.arrow-icon[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin-left:10px;color:var(--gray)}.order-details[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;padding-top:10px;border-top:1px solid var(--light-gray);color:var(--black)}.order-item[_ngcontent-%COMP%]{margin-bottom:10px;color:var(--black)}.mark-delivered-btn[_ngcontent-%COMP%]{margin-top:15px;padding:8px 16px;background-color:var(--black);color:var(--white);border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:background-color .3s ease}.mark-delivered-btn[_ngcontent-%COMP%]:hover{background-color:var(--hover-color)}.order-status[_ngcontent-%COMP%]{border:2px solid;border-radius:12px;font-weight:600;text-transform:capitalize;display:inline-block;min-width:80px;text-align:center}.pending[_ngcontent-%COMP%]{border-color:#b58900;background-color:#fff8d5}.shipping[_ngcontent-%COMP%]{background-color:#ffe8cc}.delivered[_ngcontent-%COMP%]{background-color:#d0f0c0}.canceled[_ngcontent-%COMP%]{background-color:#fcdcdc}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}